<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="description" content="">
		<meta name="author" content="">


		<!-- Bootstrap core CSS -->
		<link href="../static/css/bootstrap.min.css" rel="stylesheet">

		<!-- Custom styles for this template -->
		<link href= "../static/css/index-template.css" rel="stylesheet">

		<!-- Slider-->
		<link href="../static/css/slider.css" rel="stylesheet">

		<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.2.0/paper/bootstrap.min.css" rel="stylesheet">

		<link href="../static/css/style.css" rel="stylesheet">




		<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
		<!--[if lt IE 9]>
			<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
			<script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
		<![endif]-->
	</head>

	<body>
		<div class="navbar navbar-fixed-top navbar-default" role="navigation">
			<div class="container">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
					<a class="navbar-brand" href="#">Price My Ticket</a>
				</div>
				<div class="collapse navbar-collapse pull-right">
					<ul class="nav navbar-nav">
						<li class="active"><a href="#">Home</a></li>
						<li><a href="/analytics">Analytics</a></li>
						<li><a href="/slides">Slides</a></li>
						<li><a href="/contact">About Me</a></li>
					</ul>
				</div><!--/.nav-collapse -->
			</div>
		</div>

		<div class="homepage_photo">
			<div class="homepage_photo_overlay"></div>
			<div class="homepage_photo_text">
				<div class="homepage_photo_header">Price My Ticket</div>
				<div class="hompage_description_text">This app helps you find a good price to sell your<br>San Francisco Giants tickets on the secondary market.</div>
			</div>
		</div>

		<div class="container ticket_pricing_app">
			<div class="index-template">
				<div class="row">
					<div class="col-md-6">
						<div class="panel panel-primary" >
					<div class="panel-heading">
							<h4>Enter Ticket Info</h4> </div>
						 <div class="panel-body min-size">
							<form form class="form-horizontal" role="form" action="/price_results_json" method="GET" id="price_results_form"> 
									<div class="form-group">
										<label for="event_id" class="col-sm-4 control-label">What game are you going to? </label>
											<div class="col-sm-8">
												<select  class="form-control" name="event_id" id="event_id">
												 <option>--- Select a game ---</option>
												 {% for event_id in data['event_ids'] %}
												 <option value="{{ event_id }}" {% if event_id == 'Padres at Giants (September 28)' %}SELECTED{% endif %}>{{ event_id }}</option>
												 {% endfor %}
											 </select>
											</div>
									 </div>
									 <div class="form-group">
										<label for="section" class="col-sm-4 control-label"> Section </label>
											<div class = "col-sm-8">
												<input type="section" class="form-control form-tooltip" id="section" placeholder="Section" name="section" value="317" title="This should be a 3 digit number starting with a 1 or 3 and the last two digits between 1-47" data-toggle="tooltip" data-placement="top">
											</div>
										</div>
										<div class="form-group">
											<label for="row" class="col-sm-4 control-label"> Row </label>
												<div class = "col-sm-8">
													<input type="row" class="form-control form-tooltip" id="row" placeholder="Row" name="row"  value="12" title="This should be a number between 1 and 22" data-toggle="tooltip" data-placement="top">
												</div>
											</div>
										<div class="form-group">
											<label for="seat" class="col-sm-4 control-label"> Seat </label>
												<div class="col-sm-8" >
													<input type="seat" class="form-control form-tooltip" id="seat" placeholder="Seat" name="seat" value="1" title="This should be a number between 1 and 24" data-toggle="tooltip" data-placement="top">
												</div>                      
										 </div>
										 <div class="form-group">
											 <div class="col-sm-offset-2 col-sm-10">
												 <button type="submit" id="querymaker" class="btn btn-default">Price My Ticket</button>
											 </div>
										 </div>


								
								</form>
								
							</div>
			</div>
					</div>



					<div class="col-md-6">
						<div class="panel panel-primary">
							<div class="panel-heading">
								<h4>Pricing Information</h4>
							</div>
						 	<div class="panel-body min-size">
						 		<div class="text-center">
						 			<img class="ticket_icon" src="http://wcdn1.dataknet.com/static/resources/icons/set114/6e89eec5.png">
						 		</div>
						 		<div class="panel-body-text">
									<h6 id="text0"></h6>
									<div class= "well" id="slider_box">
										<h5>Pricing for your preferences</h5>
										<h6>How sure do you want to be that you sell your ticket? </h6>
										<div class="row">
											<div class="col-md-3 form-tooltip" style="padding-right:0px; text-align:right;" title="People rarely post tickets that have less than a 35 percent chance of selling" data-toggle="tooltip" data-placement="top">Least Sure</div>
											<div class="col-md-6">
												<input id="ex1" data-slider-id='ex1Slider' value="50" type="text" data-slider-min="35" data-slider-max="64" data-slider-step="1" data-slider-value="50" data-slider-tooltip="Hide"> 
											</div>
											<div class="col-md-3" style="padding-left:0px;"> Most Sure</div>
										</div>
										<div class="price_result"><h6> You should list the ticket price for <b> $<span id="certain_price"> </b></span> </h6></div>
										<div class="price_result"><h6> There is a <b> <span  id="ex1SliderVal">50</span> percent </b> chance you will sell the ticket at this price </h6></div>
									</div>
									<br>
									<div class="well">
										<div ><h5>Expert Advice</h5></div> 
										<div> <h6 id="text1"></h6></div> 
										<div> <h6 id="text1b"></h6></div> 
										<div> <h6 id="text2"></h6></div> 
								</div>
							</div>
					 </div>
				</div>
		</div><!-- /.container -->
 </body>

		<!-- Bootstrap core JavaScript
		================================================== -->
		<!-- Placed at the end of the document so the pages load faster -->
		<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
		<script src="../static/js/bootstrap.min.js"></script>
		<script src="../static/js/bootstrap-slider.js"></script>


		<script >
	$(document).ready(function() { 

		$(".form-tooltip").tooltip();
	

	$("#querymaker").click( function() {
		$(".panel-body-text").hide(0);
		$(".ticket_icon").show(0);
	  	$(".panel-body-text").show(2500);
	  	$(".ticket_icon").hide(2500);
		});
		
	var price_slider =$('#ex1').slider();
	

	$("#ex1").on("slideStop", function(slideEvt) {
			$(".price_result").css('visibility', 'hidden');
			$("#ex1SliderVal").text(slideEvt.value);
			var certainty = slideEvt.value
			get_certain_price(certainty);

		});


	get_certain_price(50);


	$("#price_results_form").submit(function(event){
		event.preventDefault();
		var $form = $(this);
		$.ajax({
			'method': 'GET',
			'url': '/price_results_json',
			data: $form.serialize(),
			success: function(data) {
				$("#text0").text(data.text0);
				$("#text1").text(data.text1);
				$("#text1b").text(data.text1b);
				$("#text2").text(data.text2);
				get_certain_price($('#ex1').val());
			}
			}) ;     
		});
	});


	
	function get_certain_price(certainty) {
	
		$.ajax({
			method: 'GET',
			url: '/certain_price_json',
			data: { 
				percent_certain: certainty,
				'event_id': $("#event_id").val() || 'Padres at Giants (September 28)', 
				'section': $("#section").val() || 317,
				'seat': $("#seat").val() || 1,
				'row': $("#row").val() || 12
			},
			success: function(response) {
				$("#certain_price").text(response.result);
				$(".price_result").css('visibility', 'visible');
			}
		});
		
	}
	
	
	
 
 
	</script>
 
</html>
